# 열다 (Open) - 알림 관리 앱

모든 알림을 자동으로 분류하고 관리하는 Flutter 앱입니다.

## 🎯 주요 기능

- **자동 분류**: 알림을 메신저, 공부, 금융, 일정, 쇼핑, 뉴스, 기타로 자동 분류
- **타임라인**: 모든 알림을 시간순으로 확인
- **필터링**: 카테고리, 중요도, 읽음 상태로 필터링
- **통계**: 시간대별, 요일별, 앱별 통계 제공 (구현 예정)
- **학습 기능**: 알림 속 외국어 문장으로 학습 (구현 예정)
- **로컬 저장**: 모든 데이터는 기기에만 저장

## 📋 요구사항

- Flutter SDK: 3.9.2 이상
- Android: 10 (API 29) 이상
- Kotlin: 1.9.0 이상

## 🛠️ 설치 및 실행

### 1. 의존성 설치

```bash
flutter pub get
```

### 2. 코드 생성 (Drift DB)

```bash
dart run build_runner build --delete-conflicting-outputs
```

### 3. 실행

```bash
# 디버그 모드
flutter run

# 릴리즈 모드
flutter run --release
```

## 🔑 권한 설정

앱을 처음 실행하면 **알림 접근 권한**을 요청합니다.

1. 온보딩 화면에서 "권한 설정 열기" 버튼 클릭
2. 설정 화면에서 "열다 | Open" 앱 찾기
3. 알림 접근 권한 활성화

## 📁 프로젝트 구조

```
lib/
├── main.dart                    # 앱 진입점
├── bootstrap.dart               # 초기화
├── core/
│   └── providers.dart           # Riverpod 프로바이더
├── data/
│   ├── db/
│   │   ├── app_db.dart         # Drift 데이터베이스
│   │   └── app_db.drift        # 테이블 스키마
│   ├── models/
│   │   ├── category.dart       # 카테고리 enum
│   │   ├── notification_entry.dart
│   │   └── study_item.dart
│   └── repo/
│       ├── notification_repo.dart  # 알림 저장소
│       └── study_repo.dart         # 학습 저장소
├── services/
│   ├── classifier.dart         # 알림 분류 로직
│   └── notification_listener.dart  # 알림 수신
└── ui/
    ├── home/
    │   └── timeline_page.dart  # 타임라인 화면
    └── onboarding/
        └── onboarding_page.dart  # 온보딩 화면

android/
└── app/src/main/kotlin/com/openlabs/yeolda/
    ├── MainActivity.kt                      # 메인 액티비티
    └── YeoldaNotificationListener.kt       # 알림 리스너 서비스
```

## 🧪 테스트

### 수동 테스트 시나리오

#### 1. 알림 분류 테스트

- **메신저**: 카카오톡, 텔레그램, 디스코드, 슬랙 알림 → "💬 메신저"로 분류
- **공부**: "시험", "과제", "강의" 키워드 포함 → "📚 공부"로 분류
- **금융**: 토스, 카카오뱅크, "입금", "결제" 키워드 → "💰 금융"로 분류
- **일정**: 구글 캘린더, "회의", "미팅" 키워드 → "📅 일정"으로 분류
- **쇼핑**: 쿠팡, "배송", "도착" 키워드 → "🛍️ 쇼핑"으로 분류
- **뉴스**: 뉴스 앱 알림 → "📰 뉴스"로 분류
- **기타**: 위에 해당하지 않는 알림 → "📱 기타"로 분류

#### 2. 중요도 판단 테스트

- 금융 관련 알림 → 자동으로 "중요" 표시
- "긴급", "중요", "마감" 키워드 포함 → "중요" 표시
- 200자 이상의 긴 텍스트 → "중요" 표시
- 금액 패턴 (예: "10,000원") 포함 → "중요" 표시

#### 3. 필터링 테스트

- "중요" 필터 → 중요 알림만 표시
- "읽지 않음" 필터 → 읽지 않은 알림만 표시
- 카테고리 선택 → 해당 카테고리 알림만 표시

#### 4. 읽음 처리 테스트

- 알림 카드 클릭 → 상세 보기 모달
- "읽음" 버튼 클릭 → 알림이 읽음 상태로 변경

## 🔒 개인정보 보호

- **로컬 저장**: 모든 데이터는 사용자 기기에만 저장됩니다
- **외부 전송 없음**: 수집된 알림 데이터는 외부로 전송되지 않습니다
- **삭제 가능**: 설정에서 언제든 모든 데이터를 삭제할 수 있습니다

## 🚀 향후 계획

- [ ] 통계 화면 구현
- [ ] 학습 기능 완성
- [ ] 카테고리 규칙 커스터마이징
- [ ] 데이터 백업/복원
- [ ] DND 상태 감지 및 안내
- [ ] 알림 검색 기능
- [ ] 위젯 지원
- [ ] iOS 지원

## 🐛 알려진 제한사항

1. **권한 제한**: NotificationListenerService 권한이 없으면 알림을 수집할 수 없습니다
2. **시스템 알림**: 시스템 알림(예: 배터리 부족)은 수집되지 않을 수 있습니다
3. **DND 모드**: 방해금지 모드에서는 일부 알림이 기록되지 않을 수 있습니다
4. **앱 종료 시**: 앱이 완전히 종료되면 일부 알림을 놓칠 수 있습니다

## 📝 라이선스

MIT License - 자세한 내용은 [LICENSE](LICENSE) 파일을 참고하세요.

Copyright (c) 2025 KhankhanLee

## 🙏 사용된 패키지

- **flutter_riverpod**: 상태 관리
- **drift**: 로컬 데이터베이스
- **go_router**: 라우팅
- **fl_chart**: 차트
- **intl**: 국제화 및 날짜 포맷
- **path_provider**: 파일 경로
- **sentry_flutter**: 에러 트래킹 (옵션)

## 💡 문제 해결

### 알림이 수집되지 않아요

1. 설정 > 알림 접근 권한 > "열다" 앱이 활성화되어 있는지 확인
2. 앱을 완전히 종료하지 말고 백그라운드에 유지
3. 배터리 최적화에서 제외

### 분류가 잘못되었어요

- 현재는 규칙 기반 분류만 지원합니다
- 추후 업데이트에서 커스터마이징 기능을 추가할 예정입니다

### 앱이 느려요

- 오래된 알림 삭제: 설정 > 데이터 관리 > 오래된 알림 삭제
- 앱 재시작
